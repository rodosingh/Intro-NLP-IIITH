#!/bin/bash

# $1 = Embeddings
# $2 = DATA DIR _.training.data.txt
# $3 = 2A.medical
# $4 = Top n candidate hypernyms
# $5 = 1 to load embeddings from pickle else 0 to load via gensim.models.KeyedVectors

echo "Create the input data files"
python input_creator.py $2 $3
echo "Input files created successfully."

echo "Training the taxomed"
python train_transMat.py sampledata.txt $1 $2training/data/$3.training.data.txt '' 
echo "Training complete"

echo "Batch predicting on test data"
python batch_predict.py sampletest.txt transformation_matrix_.txt $1 $4 $5
echo "Prediction complete"

echo "Creating filtered vocab"
python filter_gold.py
echo "Filtered_gold.txt created successfully"

echo "Evaluating scores"
python evaluate.py filtered_gold.txt sampletest.txt_hypernyms.txt
echo "########## END #########"
